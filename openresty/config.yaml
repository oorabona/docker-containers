# OpenResty container configuration
# Base image and third-party dependency versions

base_image: "alpine:latest"
base_image_cache:
  - arg: RESTY_IMAGE_BASE
    source: alpine
    ghcr_repo: alpine-base
    tags: ["latest"]
build_args:
  RESTY_OPENSSL_VERSION: "1.1.1w"
  RESTY_OPENSSL_PATCH_VERSION: "1.1.1f"
  RESTY_PCRE_VERSION: "8.45"
  LUAROCKS_VERSION: "3.13.0"
  NGX_PROXY_CONNECT_VERSION: "0.0.7"
# Maps build_arg names to their upstream source for monitoring
# All build_args with pinned versions MUST have an entry here:
# - monitored deps: type + source info
# - frozen/excluded deps: monitor: false with reason
dependency_sources:
  RESTY_OPENSSL_VERSION:
    monitor: false
    reason: "OpenSSL 1.1.1 is EOL, frozen"
  RESTY_OPENSSL_PATCH_VERSION:
    monitor: false
    reason: "OpenSSL 1.1.1 is EOL, frozen"
  RESTY_PCRE_VERSION:
    monitor: false
    reason: "PCRE 8.x is legacy, frozen"
  LUAROCKS_VERSION:
    type: github-release
    repo: luarocks/luarocks
    strip_v: true
  NGX_PROXY_CONNECT_VERSION:
    type: github-release
    repo: chobits/ngx_http_proxy_connect_module
    strip_v: true
