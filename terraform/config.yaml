# Terraform container configuration
# Base image and third-party dependency versions
# NOTE: Tool versions are auto-updated during build by terraform/build script

base_image: "hashicorp/terraform:${UPSTREAM_VERSION}"
base_image_cache:
  - arg: TERRAFORM_BASE
    source: hashicorp/terraform
    ghcr_repo: terraform-base
    tags: ["${VERSION}"]
  - arg: ALPINE_BASE
    source: alpine
    ghcr_repo: alpine-base
    tags: ["latest"]
  - arg: PYTHON_BASE
    source: python
    ghcr_repo: python-base
    tags: ["3.12-alpine"]
build_args:
  TFLINT_VERSION: "0.61.0"
  TRIVY_VERSION: "0.69.1"
  TERRAGRUNT_VERSION: "0.99.1"
  TERRAFORM_DOCS_VERSION: "0.21.0"
  INFRACOST_VERSION: "0.10.43"
  GITHUB_CLI_VERSION: "2.86.0"
  AWS_CLI_VERSION: "1.44.38"
  AZURE_CLI_VERSION: "2.83.0"
  GCP_CLI_VERSION: "latest"
# Maps build_arg names to their upstream source for monitoring
# All build_args with pinned versions MUST have an entry here:
# - monitored deps: type + source info
# - frozen/excluded deps: monitor: false with reason
dependency_sources:
  TFLINT_VERSION:
    type: github-release
    repo: terraform-linters/tflint
    strip_v: true
  TRIVY_VERSION:
    type: github-release
    repo: aquasecurity/trivy
    strip_v: true
  TERRAGRUNT_VERSION:
    type: github-release
    repo: gruntwork-io/terragrunt
    strip_v: true
  TERRAFORM_DOCS_VERSION:
    type: github-release
    repo: terraform-docs/terraform-docs
    strip_v: true
  INFRACOST_VERSION:
    type: github-release
    repo: infracost/infracost
    strip_v: true
  GITHUB_CLI_VERSION:
    type: github-release
    repo: cli/cli
    strip_v: true
  AWS_CLI_VERSION:
    type: pypi
    package: awscli
  AZURE_CLI_VERSION:
    type: pypi
    package: azure-cli
  GCP_CLI_VERSION:
    monitor: false
    reason: "Always latest â€” no version to track"
