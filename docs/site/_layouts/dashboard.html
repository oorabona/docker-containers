<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net; font-src https://fonts.gstatic.com https://cdn.jsdelivr.net; img-src 'self' data: https://img.shields.io https://github.com; connect-src 'self'"/>
  <title>{{ page.title }} | {{ site.title }}</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tabler Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@3.36.1/dist/tabler-icons.min.css">

  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/theme.css">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/dashboard.css">
</head>
<body>
  <!-- Skip link for keyboard navigation -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Animated background -->
  <div class="bg-animated" aria-hidden="true"></div>
  <div class="shape shape-1" aria-hidden="true"></div>
  <div class="shape shape-2" aria-hidden="true"></div>
  <div class="shape shape-3" aria-hidden="true"></div>

  <div class="container">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="header-title">
        <span class="header-pretitle">Container Management System</span>
        <h1 class="header-main">{{ page.title | default: site.title }}</h1>
      </div>
      <div class="header-actions">
        <button class="theme-toggle" aria-label="Toggle light/dark theme">
          <i class="ti ti-moon" aria-hidden="true"></i>
        </button>
        <a href="https://github.com/{{ site.github_username | default: site.github.owner_name }}/{{ site.repository | default: site.github.repository_name }}" class="btn btn-primary" target="_blank" rel="noopener noreferrer" aria-label="View repository on GitHub (opens in new tab)">
          <i class="ti ti-brand-github" aria-hidden="true"></i>
          Repository
        </a>
      </div>
    </header>

    <!-- Controls Bar -->
    <div class="controls-bar glass">
      <div class="controls-group" role="group" aria-labelledby="registry-label">
        <span class="controls-label" id="registry-label">Registry</span>
        <div class="registry-toggle" role="radiogroup" aria-label="Select container registry">
          <button class="registry-btn active" data-registry="ghcr"
                  role="radio" aria-checked="true" aria-label="GitHub Container Registry">
            <i class="ti ti-package" aria-hidden="true"></i> GHCR
          </button>
          <button class="registry-btn" data-registry="dockerhub"
                  role="radio" aria-checked="false" aria-label="Docker Hub">
            <i class="ti ti-brand-docker" aria-hidden="true"></i> Docker Hub
          </button>
        </div>
      </div>

      <div class="search-container">
        <i class="ti ti-search search-icon" aria-hidden="true"></i>
        <input type="search" class="search-input" id="search-input"
               placeholder="Search containers..."
               aria-label="Search containers">
      </div>

      <div class="controls-group" role="group" aria-labelledby="status-label">
        <span class="controls-label" id="status-label">Status</span>
        <div class="status-filters" role="radiogroup" aria-label="Filter by status">
          <button class="filter-btn active" data-status="all"
                  role="radio" aria-checked="true">
            All <span class="count" id="count-all" aria-label="total count">0</span>
          </button>
          <button class="filter-btn" data-status="up-to-date"
                  role="radio" aria-checked="false">
            Up to date <span class="count" id="count-up-to-date">0</span>
          </button>
          <button class="filter-btn" data-status="update-available"
                  role="radio" aria-checked="false">
            Updates <span class="count" id="count-update-available">0</span>
          </button>
          <button class="filter-btn" data-status="not-published"
                  role="radio" aria-checked="false">
            Not published <span class="count" id="count-not-published">0</span>
          </button>
        </div>
      </div>
    </div>

    <main id="main-content" role="main">
      {{ content }}
    </main>

    <!-- Live status region for screen readers (F-005) -->
    <div id="status-live" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
      <p>Generated by <a href="generate-dashboard.sh">generate-dashboard.sh</a> using Jekyll templating</p>
    </footer>
  </div>

  <!-- JavaScript (F-006: addEventListener, F-007: IIFE) -->
  <script src="{{ site.baseurl }}/assets/js/dashboard.js"></script>
</body>
</html>
